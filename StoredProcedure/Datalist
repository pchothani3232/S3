USE [DatabaseConfiguration1]
GO
/****** Object:  StoredProcedure [dbo].[Datalist]    Script Date: 19-08-2025 22:49:04 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER       PROCEDURE [dbo].[Datalist]
@Status nvarchar(max)='',
@SalesInvoiceDate datetime = NULL,
@SalesInvoiceNumber nvarchar(max) ='',
@GrossAmount decimal(18,0)= null,
@DiscountAmount decimal(18,0)=null,
@TaxAmount decimal(18,0)=null,
@NetAmount decimal(18,0)=null,
@FromDate date=NULL,
@ToDate date=NULL,
@CustomerName nvarchar(max) = null
AS
BEGIN
	begin
		if @Status='Select'

		select c.Customer_Id,c.Customer_Name,c.Customer_Address,c.Customer_PhoneNumber,
		s.SalseInvoice_Id,s.SalesInvoice_Date,s.SalesInvoice_Number,s.GrossAmount,s.DiscountAmount,s.NetAmount
		from CustomerDetail c join SalesInvoice s on c.Customer_Id = s.Customer_Id;
	end

	begin
		if @Status ='DateBySearchData'

		select c.Customer_Id,c.Customer_Name,c.Customer_Address,c.Customer_PhoneNumber,
		s.SalseInvoice_Id,s.SalesInvoice_Date,s.SalesInvoice_Number,s.GrossAmount,s.DiscountAmount,s.NetAmount
		from CustomerDetail c join SalesInvoice s on c.Customer_Id = s.Customer_Id 
		where SalesInvoice_Date  between @FromDate and @ToDate ;
	end

	begin
		if @Status = 'SearchCustomerName'

		select c.Customer_Id,c.Customer_Name,c.Customer_Address,c.Customer_PhoneNumber,
		s.SalseInvoice_Id,s.SalesInvoice_Date,s.SalesInvoice_Number,s.GrossAmount,s.DiscountAmount,s.NetAmount
		from CustomerDetail c join SalesInvoice s on c.Customer_Id = s.Customer_Id 
		where  Customer_Name like @CustomerName + '%';
	end
	
END

--exec Datalist @Status='SearchCustomerName',@CustomerName = 'Rahul'
